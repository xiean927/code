





### 1108 Finding Average (20分)


* 1，直接模拟判断输入字符串是否合法

```
#include <bits/stdc++.h>

using namespace std;

const int maxn=1010;
char str[maxn];

double tmp;

bool judge(){
    double a,b;///a记录整数部分,b记录小数部分
    tmp=a=b=0;
    int i,len=strlen(str);
    if(str[0]=='-')
        i=1;
    else
        i=0;
    for(;i<len;i++){
        if(isdigit(str[i]))
            a=a*10+str[i]-'0';
        else if(str[i]=='.')
            break;
        else///遇到了非 数字或 小数点，则该字符数组不是数字
            return false;
    }
    double c=0.1;///小数单位
    if(len-i-1>2)///小数位最多为2位
        return false;
    i++;
    for(;i<len;i++){
        if(isdigit(str[i])){
            b=b+(str[i]-'0')*c;
            c*=0.1;
        }
        else{///小数部分只能是纯数字，如果是小数点，则表明该字符串不合法
            return false;
        }
    }
    tmp=a+b;
    if(str[0]=='-') tmp=-tmp;
    if(tmp>=-1000.0&&tmp<=1000.0)   return true;
    return false;///生成的数字大于1000，或小于-1000
}

int main(){
    double ans=0;
    int n,cnt=0;
    scanf("%d",&n);
    for(int i=1;i<=n;i++){
        scanf("%s",str);
        if(judge()){
            ans+=tmp;
            cnt++;
        }
        else
            printf("ERROR: %s is not a legal number\n",str);
    }
    if(cnt==0){
        printf("The average of %d numbers is Undefined\n",cnt);
    }
    else if(cnt==1){
        printf("The average of 1 number is %.2lf\n",ans);
    }
    else{
        ans=(double)(ans/cnt);
        printf("The average of %d numbers is %.2lf\n",cnt,ans);
    }
    return 0;
}


```



* 2，利用```sccanf```处理




